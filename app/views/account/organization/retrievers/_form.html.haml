#providers{ data: { providers: @providers.to_json, selected_providers: @providers.select { |e| e['id'] == @retriever.provider_id }.to_json } }
#banks{ data: { banks: @banks.to_json, selected_banks: @banks.select { |e| e['id'] == @retriever.bank_id }.to_json } }

- if action_name.in?(%w(new create))
  - url = account_organization_customer_retrievers_path(@organization, @customer, @retriever)
- else
  - url = account_organization_customer_retriever_path(@organization, @customer, @retriever)
= simple_form_for @retriever, url: url, html: { class: 'retriever_form form form-horizontal' } do |f|
  = f.input :type, collection: [['Documents (Factures)', 'provider'], ['Op√©rations bancaires', 'bank']], include_blank: false, disabled: @retriever.persisted?
  = f.input :service_name, as: :hidden
  = f.input :provider_id, required: true, disabled: @retriever.persisted?
  = f.input :bank_id, required: true, disabled: @retriever.persisted?
  = f.input :name
  - unless @retriever.persisted? && @retriever.bank?
    = f.input :journal_id, collection: @customer.account_book_types.asc(:name), include_blank: false, required: true
  #params{ data: { connector_id: @retriever.connector_id, attributes: retriever_dyn_attrs(@retriever) } }
  .form-actions
    = f.submit t('actions.submit'), class: 'btn btn-primary'
    = link_to t('actions.cancel'), account_organization_customer_retrievers_path(@organization, @customer), class: 'btn'

= render partial: 'account/retrievers/form_template'
